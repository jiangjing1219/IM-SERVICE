(self["webpackChunkmy_web_im"]=self["webpackChunkmy_web_im"]||[]).push([[155],{7873:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(6768),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"},r=n,o=a(4827);function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),s.forEach((function(t){i(e,t,a[t])}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e,t){var a=l({},e,t.attrs);return(0,s.bF)(o.A,l({},a,{icon:r}),null)};u.displayName="VideoCameraOutlined",u.inheritAttrs=!1;var c=u},2309:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(6768),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M713.5 599.9c-10.9-5.6-65.2-32.2-75.3-35.8-10.1-3.8-17.5-5.6-24.8 5.6-7.4 11.1-28.4 35.8-35 43.3-6.4 7.4-12.9 8.3-23.8 2.8-64.8-32.4-107.3-57.8-150-131.1-11.3-19.5 11.3-18.1 32.4-60.2 3.6-7.4 1.8-13.7-1-19.3-2.8-5.6-24.8-59.8-34-81.9-8.9-21.5-18.1-18.5-24.8-18.9-6.4-.4-13.7-.4-21.1-.4-7.4 0-19.3 2.8-29.4 13.7-10.1 11.1-38.6 37.8-38.6 92s39.5 106.7 44.9 114.1c5.6 7.4 77.7 118.6 188.4 166.5 70 30.2 97.4 32.8 132.4 27.6 21.3-3.2 65.2-26.6 74.3-52.5 9.1-25.8 9.1-47.9 6.4-52.5-2.7-4.9-10.1-7.7-21-13z"}},{tag:"path",attrs:{d:"M925.2 338.4c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"whats-app",theme:"outlined"},r=n,o=a(4827);function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),s.forEach((function(t){i(e,t,a[t])}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e,t){var a=l({},e,t.attrs);return(0,s.bF)(o.A,l({},a,{icon:r}),null)};u.displayName="WhatsAppOutlined",u.inheritAttrs=!1;var c=u},6725:function(e){!function(t,a){e.exports=a()}(0,(function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,a,s){var n=a.prototype,r=n.format;s.en.formats=e,n.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var a=this.$locale().formats,s=function(t,a){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,s,n){var r=n&&n.toUpperCase();return s||a[n]||e[n]||a[r].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,a){return t||a.slice(1)}))}))}(t,void 0===a?{}:a);return r.call(this,s)}}}))},7914:function(e){!function(t,a){e.exports=a()}(0,(function(){"use strict";return function(e,t,a){e=e||{};var s=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(e,t,a,n){return s.fromToBase(e,t,a,n)}a.en.relativeTime=n,s.fromToBase=function(t,s,r,o,l){for(var i,u,c,d=r.$locale().relativeTime||n,v=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=v.length,f=0;f<p;f+=1){var m=v[f];m.d&&(i=o?a(t).diff(r,m.d,!0):r.diff(t,m.d,!0));var y=(e.rounding||Math.round)(Math.abs(i));if(c=i>0,y<=m.r||!m.r){y<=1&&f>0&&(m=v[f-1]);var g=d[m.l];l&&(y=l(""+y)),u="string"==typeof g?g.replace("%d",y):g(y,s,m.l,c);break}}if(s)return u;var h=c?d.future:d.past;return"function"==typeof h?h(u):h.replace("%s",u)},s.to=function(e,t){return r(e,t,this,!0)},s.from=function(e,t){return r(e,t,this)};var o=function(e){return e.$u?a.utc():a()};s.toNow=function(e){return this.to(o(this),e)},s.fromNow=function(e){return this.from(o(this),e)}}}))},9570:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(6768),n=a(4232);const r=["src"];function o(e,t,a,o,l,i){return(0,s.uX)(),(0,s.CE)("div",(0,s.v6)(e.$attrs,{class:o.styledAvatar}),[a.status?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)([o.statusIcon,a.status]),style:(0,n.Tr)(o.statusIconStyle)},null,6)):(0,s.Q3)("",!0),(0,s.Lk)("div",{style:(0,n.Tr)(o.avatarClipStyle)},[(0,s.Lk)("img",{src:a.src,alt:"",class:"avatar-image"},null,8,r)],4)],16)}var l={props:{src:{type:String,required:!0},size:{type:String,default:"48px"},status:{type:String,validator:e=>["online","offline"].includes(e)},statusIconSize:{type:String,default:"8px"}},setup(e){const t="styled-avatar",a=(0,s.EW)((()=>({width:e.size,height:e.size,borderRadius:"50%",overflow:"hidden"}))),n="status-icon",r=(0,s.EW)((()=>{let t={position:"absolute",left:"2px",top:"6px",width:e.statusIconSize,height:e.statusIconSize,borderRadius:"50%"};return"online"===e.status?t={...t,backgroundColor:"#34D859"}:"offline"===e.status&&(t={...t,backgroundColor:"rgba(24, 28, 47, 0.2)"}),t}));return{styledAvatar:t,avatarClipStyle:a,statusIcon:n,statusIconStyle:r}}},i=a(1241);const u=(0,i.A)(l,[["render",o],["__scopeId","data-v-64907781"]]);var c=u},6350:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Re}});a(4114);var s=a(6768),n=a(144),r=a(7477),o=a(4232),l=a(9570),i=a(8406),u=a(7906),c=a(2177),d=a(5234);const v=a(1576),p=a(7914),f=a(6725);function m(e){const t=v(),a=v(e),s=t.diff(a,"minute"),n=t.diff(a,"hour"),r=t.diff(a,"day");return s<3?"刚刚":s<60?`${s} 分钟前`:n<24?`${n} 小时前`:r<=3?`${r} 天前`:a.format("YYYY 年 M 月 D 日")}v.extend(p),v.extend(f);const y={style:{display:"flex","flex-direction":"column"}},g={style:{display:"flex"}},h={style:{display:"flex","flex-direction":"column","justify-content":"space-between",width:"100%","margin-left":"12px"}},b={style:{width:"100%",display:"flex","justify-content":"space-between"}},k={style:{display:"flex","justify-content":"space-between",width:"100%"}},I={key:0},x={style:{"align-self":"flex-start"}},C={style:{display:"flex","justify-content":"space-between","padding-top":"26px"}},M={key:0,style:{display:"flex"}},_={key:1};var F=(0,s.pM)({__name:"ConversationCar",props:{conversationId:{default:""},conversationType:{default:0},targetId:{default:""},unreadCount:{default:0}},setup(e){const t=e,a=(0,i.e)(),{currentConversation:v}=(0,d.bP)(a),p=(0,u.J)(),f=(0,c.n)(),F=()=>{a.setCurrentConversation(t.conversationId),a.resetP2PConversationUnreadCount(t.conversationId),t.unreadCount>0&&f.sendP2PMessageReadAck(t.targetId,t.conversationId)},T=(0,s.EW)((()=>{if(0===t.conversationType){const e=p.getFriendShip(t.targetId);return e?.remark||e?.nickName}return p.getGroupInfo(t.targetId)?.groupName})),w=(0,s.EW)((()=>{let e="";if(0===t.conversationType){const a=p.getFriendShip(t.targetId);e=a?.nickName}else e=p.getGroupInfo(t.targetId)?.groupName;return`https://robohash.org/${e}?set=set${0===t.conversationType?"4":"2"}&size=200x200`})),L=(0,s.EW)((()=>{const e=p.getOnlineStatus(t.targetId);return 1===e?"online":"offline"})),S=(0,s.EW)((()=>f.getLastMessage(t.targetId,t.conversationType)));return(e,a)=>{const i=(0,s.g2)("el-text"),u=(0,s.g2)("el-icon"),c=(0,s.g2)("el-badge"),d=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.Wv)(d,{style:{width:"99%",margin:"3px  0"},shadow:"hover",class:(0,o.C4)({"car-container-click":e.targetId===(0,n.R1)(v)?.toId}),onClick:F},{default:(0,s.k6)((()=>[(0,s.Lk)("div",y,[(0,s.Lk)("div",g,[(0,s.bF)(l.A,{src:w.value,status:L.value,size:"42px",statusIconSize:0===t.conversationType?"10px":"0"},null,8,["src","status","statusIconSize"]),(0,s.Lk)("div",h,[(0,s.Lk)("div",b,[(0,s.Lk)("div",k,[(0,s.bF)(i,{class:"mx-1",type:"primary",style:{"align-self":"flex-start","max-width":"180px"},size:"large",truncated:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(T.value),1)])),_:1}),S.value?((0,s.uX)(),(0,s.CE)("div",I,(0,o.v_)((0,n.R1)(m)(S.value?.messageTime)),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",x,[0===t.conversationType?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"mx-1",type:"online"===L.value?"success":"info",size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)("online"===L.value?"在线":"离线"),1)])),_:1},8,["type"])):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",C,[S.value?((0,s.uX)(),(0,s.CE)("div",M,[(0,s.bF)(u,{style:{"margin-right":"5px",color:"#179adb"},class:(0,o.C4)({"rotate-180":!S.value?.isMe})},{default:(0,s.k6)((()=>[(0,s.bF)((0,n.R1)(r.yXV))])),_:1},8,["class"]),(0,s.bF)(i,{type:"info",size:"large","line-clamp":"1"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(S.value.messageBody),1)])),_:1})])):(0,s.Q3)("",!0),e.unreadCount>0?((0,s.uX)(),(0,s.CE)("div",_,[(0,s.bF)(c,{value:t.unreadCount,class:"item",offset:"[5,10]"},null,8,["value"])])):(0,s.Q3)("",!0)])])])),_:1},8,["class"])}}}),T=a(1241);const w=(0,T.A)(F,[["__scopeId","data-v-6d59b5c3"]]);var L=w,S=a(2309),R=a(7873),A=a(443),z=a.p+"img/demo.daefc7bf.jpg";const E={class:"styled-profile"};var W=(0,s.pM)({__name:"Profile",setup(e){return(e,t)=>((0,s.uX)(),(0,s.CE)("div",E,[(0,s.bF)(l.A,{src:(0,n.R1)(z),class:"avatar-style",size:"130px",status:"online",statusIconSize:"0px"},null,8,["src"])]))}});const Y=(0,T.A)(W,[["__scopeId","data-v-f2a3fcd6"]]);var O=Y;const j={class:"styled-title-bar"},P={style:{display:"flex",height:"64px",width:"100%",flex:"1"}},X={style:{display:"flex","flex-direction":"column","justify-content":"space-between","margin-left":"10px"}},N={style:{"align-self":"flex-start","margin-top":"5px"}},V={key:0},D={style:{display:"flex",width:"200px","justify-content":"space-around","align-items":"center"}};var K=(0,s.pM)({__name:"TitleBar",setup(e){(0,c.n)();const t=(0,i.e)(),a=(0,u.J)(),r=(0,n.KR)(!1),{currentConversation:v}=(0,d.bP)(t);function p(){r.value=!0}const f=(0,s.EW)((()=>{let e="";if(0===v.value?.conversationType){const t=a.getFriendShip(v.value.toId);e=t?.nickName}else 1===v.value?.conversationType&&(e=a.getGroupInfo(v.value.toId)?.groupName);return`https://robohash.org/${e}?set=set${0===v.value?.conversationType?"4":"2"}&size=200x200`})),m=(0,s.EW)((()=>{let e="";if(0===v.value?.conversationType){const t=a.getFriendShip(v.value.toId);e=t?.remark||t?.nickName}else 1===v.value?.conversationType&&(e=a.getGroupInfo(v.value.toId)?.groupName);return e})),y=(0,s.EW)((()=>a.getOnlineStatus(v.value.toId)));return(e,t)=>{const a=(0,s.g2)("el-text"),i=(0,s.g2)("el-drawer");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",j,[(0,s.Lk)("div",P,[(0,s.bF)(l.A,{src:f.value,status:"online",size:"64px",statusIconSize:"0px",onClick:p},null,8,["src"]),(0,s.Lk)("div",X,[(0,s.Lk)("div",N,[(0,s.bF)(a,{class:"mx-1",size:"large"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(m.value),1)])),_:1})]),0===(0,n.R1)(v)?.conversationType?((0,s.uX)(),(0,s.CE)("div",V,(0,o.v_)((1===y.value?"在线":"离线")+" · 最后阅读 · 三小时前"),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",D,[(0,s.bF)((0,n.R1)(S.A),{style:{fontSize:"42px"}}),(0,s.bF)((0,n.R1)(R.A),{style:{fontSize:"42px"}}),(0,s.bF)((0,n.R1)(A.A),{style:{fontSize:"42px"}})])]),(0,s.bF)(i,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),title:"好友资料详情",direction:"rtl"},{default:(0,s.k6)((()=>[(0,s.bF)(O)])),_:1},8,["modelValue"])],64)}}});const $=(0,T.A)(K,[["__scopeId","data-v-63410aa0"]]);var B=$,Q=a(5130),G=a(6711);const H={key:0,style:{margin:"12px"}},U={class:"styled-chat-bubble"},J={key:0,class:"chat-bubble-nick-name"},q={class:"bubble"},Z={class:"message-time"},ee={key:1,style:{margin:"12px"}};var te=(0,s.pM)({__name:"ChatBubble",props:{type:{default:"mine"},time:{default:""},conversationType:{default:0},targetId:{default:""},fromId:{default:""},messageStatus:{default:0}},setup(e){(0,Q.$9)((e=>({"5b709a5a":(0,n.R1)(i),"297178ba":(0,n.R1)(c),"0b9e6f36":(0,n.R1)(r),"320aaf92":(0,n.R1)(a)})));const t=e,a="mine"===t.type?"#4F9DDE":"#F5F8FA",r="mine"===t.type?"#FFFFFF":"#181C2F",i="mine"===t.type?"flex-end":"flex-start",c="mine"===t.type?"end":"start",d=(0,u.J)(),v=(0,G.U)(),p=(0,s.EW)((()=>1===t.conversationType?d.getMemberNickName(t.targetId,t.fromId):"")),f=(0,s.EW)((()=>{if("other"===t.type)return"已读";switch(t.messageStatus){case 0:return"发送中";case 1:return"已发送";case 2:return"已送达";case 3:return"已读";default:return""}})),m=(0,s.EW)((()=>{let e="";return e="mine"===t.type?v.userInfo.nickName:1===t.conversationType?d.getMemberNickName(t.targetId,t.fromId):d.getFriendShip(t.targetId)?.nickName,`https://robohash.org/${e}?set=set4&size=200x200`}));return(e,a)=>{const n=(0,s.g2)("el-text");return(0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)(["chat-bubble-container",{"chat-bubble-left":"other"===t.type,"chat-bubble-right":"mine"===t.type}])},["mine"!==t.type?((0,s.uX)(),(0,s.CE)("div",H,[(0,s.bF)(l.A,{src:m.value,status:"online",size:"40px",statusIconSize:"0px"},null,8,["src"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",U,[1===t.conversationType?((0,s.uX)(),(0,s.CE)("div",J,[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(p.value),1)])),_:1})])):(0,s.Q3)("",!0),(0,s.Lk)("div",q,[(0,s.bF)(n,{size:"large",style:{color:"#2c3e50"}},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)("消息内容")]))])),_:3})]),(0,s.Lk)("div",Z,(0,o.v_)(0===t.conversationType?`${e.time} ${f.value}`:e.time),1)]),"mine"===t.type?((0,s.uX)(),(0,s.CE)("div",ee,[(0,s.bF)(l.A,{src:m.value,status:"online",size:"40px",statusIconSize:"0px"},null,8,["src"])])):(0,s.Q3)("",!0)],2)}}});const ae=(0,T.A)(te,[["__scopeId","data-v-e7cae06c"]]);var se=ae,ne=a(1219);const re={class:"styled-footer"};var oe=(0,s.pM)({__name:"Footer",setup(e){const t=(0,s.WQ)("ImSdk"),a=(0,n.KR)(""),o=(0,c.n)(),l=(0,i.e)();function u(e){if(console.log("send",l.currentConversation.conversationType),e)if(console.log("接受方：",l.currentConversation.toId),a.value="",0===l.currentConversation.conversationType){const a=t.createP2PTextMessage(l.currentConversation.toId,e);console.log("发送单聊消息"),t.sendP2PMessage(a);const s={clientType:1,messageKey:a.messageKey,messageId:a.messageId,messageRandom:a.messageRandom,messageTime:a.messageTime,fromId:a.fromId,toId:a.toId,messageBody:JSON.parse(a.messageBody).content,messageType:1,messageStatus:0,isMe:!0};o.addMessageRecord(l.currentConversation.toId,s)}else{console.log("发送群聊消息");const a=t.createGroupTextMessage(l.currentConversation.toId,e);t.sendGroupMessage(a);const s={clientType:1,messageKey:a.messageKey,messageId:a.messageId,messageRandom:a.messageRandom,messageTime:a.messageTime,fromId:a.fromId,toId:a.toId,messageBody:JSON.parse(a.messageBody).content,messageType:1,messageStatus:0,isMe:!0};o.addGroupMessageRecord(l.currentConversation.toId,s)}else(0,ne.nk)({message:"不能发送空白消息！",type:"warning"})}return(e,t)=>{const o=(0,s.g2)("el-icon"),l=(0,s.g2)("a-input");return(0,s.uX)(),(0,s.CE)("div",re,[(0,s.bF)(l,{value:a.value,"onUpdate:value":t[1]||(t[1]=e=>a.value=e),bordered:!1,placeholder:"请输入你想和 ta 说的话",size:"large",onKeyup:t[2]||(t[2]=(0,Q.jR)((e=>u(a.value)),["enter"]))},{suffix:(0,s.k6)((()=>[(0,s.bF)(o,{style:{"font-size":"40px"},color:"#4F9DDE",onClick:t[0]||(t[0]=e=>u(a.value))},{default:(0,s.k6)((()=>[(0,s.bF)((0,n.R1)(r.Yk4),{class:"suffix-icon"})])),_:1})])),_:1},8,["value"])])}}});const le=(0,T.A)(oe,[["__scopeId","data-v-3de1e1c3"]]);var ie=le,ue=a(1576),ce=a.n(ue),de=a(2657);const ve={class:"styled-conversation"},pe={style:{width:"100%"}},fe={style:{flex:"1","overflow-y":"auto"}};var me=(0,s.pM)({__name:"ChatMessage",setup(e){const t=(0,c.n)(),a=(0,i.e)(),{currentConversation:r}=(0,d.bP)(a);function l(){return 1===r.value.conversationType?t.getGroupMessageRecord(r.value.toId)||[]:t.getUserMessageRecord(r.value.toId)||[]}const u=(0,s.EW)((()=>r.value?l():[])),v=(0,n.KR)(),p=(0,n.KR)();return(0,s.wB)((()=>u),(()=>{(0,s.dY)((()=>{v.value&&p.value?.setScrollTop(v.value?.clientHeight)}))}),{deep:!0}),(0,s.sV)((()=>{(0,s.dY)((()=>{v.value&&p.value?.setScrollTop(v.value?.clientHeight)}))})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",ve,[(0,s.Lk)("div",pe,[(0,s.bF)(B)]),(0,s.Lk)("div",fe,[u.value.length>0?((0,s.uX)(),(0,s.Wv)((0,n.R1)(de.kA),{key:0,height:"100%",ref_key:"scrollbarRef",ref:p},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{ref_key:"innerRef",ref:v},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e=>((0,s.uX)(),(0,s.Wv)(se,{type:e.isMe?"mine":"other","conversation-type":(0,n.R1)(r).conversationType,time:(0,n.R1)(ce())(e.messageTime).format("YYYY-MM-DD HH:mm"),"target-id":(0,n.R1)(r).toId,"from-id":e.fromId,"message-status":e.messageStatus,key:e.messageId},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e.messageBody),1)])),_:2},1032,["type","conversation-type","time","target-id","from-id","message-status"])))),128))],512)])),_:1},512)):(0,s.Q3)("",!0)]),(0,s.bF)(ie)]))}});const ye=(0,T.A)(me,[["__scopeId","data-v-3fe8d198"]]);var ge=ye,he=a(1114);class be{constructor(e){(0,he.A)(this,"memberId",void 0),(0,he.A)(this,"alias",""),(0,he.A)(this,"speakFlag","0"),(0,he.A)(this,"speakDate",0),(0,he.A)(this,"joinType",0),(0,he.A)(this,"role",0),this.memberId=e}}var ke=a(3851);const Ie={style:{display:"flex"}},xe={class:"sidebar"},Ce={class:"styled-message-list"},Me={class:"chat-header"},_e={style:{height:"36px",width:"36px","background-color":"rgba(24, 28, 47, 0.2)","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"}},Fe={class:"chat-body"},Te={class:"message-content"},we={class:"dialog-footer"};var Le=(0,s.pM)({__name:"ConversationPage",setup(e){const t=(0,s.WQ)("ImSdk"),a=(0,i.e)(),{conversationSet:o}=(0,d.bP)(a),l=(0,u.J)(),{friendShipList:c}=(0,d.bP)(l),v=(0,n.KR)(""),p=(0,n.KR)(!1),f=()=>{p.value=!0},m=(0,s.EW)((()=>c.value.map((e=>({...e,label:e.remark||e.nickName}))))),y=(0,n.KR)([]),g=(e,t)=>t.label.toLowerCase().includes(e.toLowerCase()),h=()=>{if(0===y.value.length)return;const e=[];y.value.forEach((t=>{e.push(new be(t))})),t.createGroup(1,"",0,0,"群简介","群公告","",100,e).then((e=>{(0,ke.df)({title:"Success",message:"创建群组成功!",type:"success"}),p.value=!1})),console.log("创建群组",y.value)};return(e,t)=>{const a=(0,s.g2)("el-button"),l=(0,s.g2)("el-input"),i=(0,s.g2)("el-icon"),u=(0,s.g2)("el-scrollbar"),c=(0,s.g2)("el-transfer"),d=(0,s.g2)("el-dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Ie,[(0,s.Lk)("div",xe,[(0,s.Lk)("div",Ce,[(0,s.Lk)("div",Me,[(0,s.bF)(l,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),style:{width:"87%",height:"40px","border-radius":"24px","background-color":"rgba(241, 237, 237, 0.3)"},placeholder:"搜索",class:"input-with-select"},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{icon:(0,n.R1)(r.vji)},null,8,["icon"])])),_:1},8,["modelValue"]),(0,s.Lk)("div",_e,[(0,s.bF)(i,{size:"26",onClick:f},{default:(0,s.k6)((()=>[(0,s.bF)((0,n.R1)(r.FWt))])),_:1})])]),(0,s.Lk)("div",Fe,[(0,s.bF)(u,{height:"100%",style:{width:"100%"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,n.R1)(o),(e=>((0,s.uX)(),(0,s.Wv)(L,{key:e.conversationId,"conversation-id":e.conversationId,"conversation-type":e.conversationType,"target-id":e.toId,"unread-count":e.unreadCount},null,8,["conversation-id","conversation-type","target-id","unread-count"])))),128))])),_:1})])])]),(0,s.Lk)("div",Te,[(0,s.bF)(ge)])]),(0,s.bF)(d,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),title:"创建群组",width:"700px",center:""},{footer:(0,s.k6)((()=>[(0,s.Lk)("div",we,[(0,s.bF)(a,{onClick:t[2]||(t[2]=e=>p.value=!1)},{default:(0,s.k6)((()=>[(0,s.eW)("取消")])),_:1}),(0,s.bF)(a,{type:"primary",onClick:h},{default:(0,s.k6)((()=>[(0,s.eW)(" 创建 ")])),_:1})])])),default:(0,s.k6)((()=>[(0,s.bF)(c,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=e=>y.value=e),filterable:"","filter-method":g,"filter-placeholder":"搜索",data:m.value,titles:["好友","选择联系人"],props:{key:"toId"}},null,8,["modelValue","data"])])),_:1},8,["modelValue"])],64)}}});const Se=Le;var Re=Se}}]);
//# sourceMappingURL=155.32f42c54.js.map
"use strict";(self["webpackChunkmy_web_im"]=self["webpackChunkmy_web_im"]||[]).push([[299],{9570:function(e,a,t){t.d(a,{A:function(){return d}});var l=t(6768),r=t(4232);const n=["src"];function o(e,a,t,o,s,i){return(0,l.uX)(),(0,l.CE)("div",(0,l.v6)(e.$attrs,{class:o.styledAvatar}),[t.status?((0,l.uX)(),(0,l.CE)("div",{key:0,class:(0,r.C4)([o.statusIcon,t.status]),style:(0,r.Tr)(o.statusIconStyle)},null,6)):(0,l.Q3)("",!0),(0,l.Lk)("div",{style:(0,r.Tr)(o.avatarClipStyle)},[(0,l.Lk)("img",{src:t.src,alt:"",class:"avatar-image"},null,8,n)],4)],16)}var s={props:{src:{type:String,required:!0},size:{type:String,default:"48px"},status:{type:String,validator:e=>["online","offline"].includes(e)},statusIconSize:{type:String,default:"8px"}},setup(e){const a="styled-avatar",t=(0,l.EW)((()=>({width:e.size,height:e.size,borderRadius:"50%",overflow:"hidden"}))),r="status-icon",n=(0,l.EW)((()=>{let a={position:"absolute",left:"2px",top:"6px",width:e.statusIconSize,height:e.statusIconSize,borderRadius:"50%"};return"online"===e.status?a={...a,backgroundColor:"#34D859"}:"offline"===e.status&&(a={...a,backgroundColor:"rgba(24, 28, 47, 0.2)"}),a}));return{styledAvatar:a,avatarClipStyle:t,statusIcon:r,statusIconStyle:n}}},i=t(1241);const u=(0,i.A)(s,[["render",o],["__scopeId","data-v-64907781"]]);var d=u},8299:function(e,a,t){t.r(a),t.d(a,{default:function(){return H}});var l=t(6768),r=t(144),n=t(4232),o=t(7477),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},i=s,u=t(4827);function d(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},l=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(a){c(e,a,t[a])}))}return e}function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var v=function(e,a){var t=d({},e,a.attrs);return(0,l.bF)(u.A,d({},t,{icon:i}),null)};v.displayName="UserAddOutlined",v.inheritAttrs=!1;var p=v,m=t(9570);const g={class:"car-container"},b={class:"car-text"};var k=(0,l.pM)({__name:"ContactCard",props:{contact:{}},setup(e){const a=e,t=(0,l.EW)((()=>`https://robohash.org/${a.contact.nickName}?set=set4&size=200x200`));return(e,a)=>{const r=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.Wv)(r,(0,l.v6)({style:{width:"99%",margin:"3px  0"},shadow:"hover"},e.$attrs),{default:(0,l.k6)((()=>[(0,l.Lk)("div",g,[(0,l.bF)(m.A,{src:t.value,status:"online",size:"42px",statusIconSize:"8px"},null,8,["src"]),(0,l.Lk)("div",b,(0,n.v_)(e.contact.remark||e.contact.nickName),1)])])),_:1},16)}}}),f=t(1241);const h=(0,f.A)(k,[["__scopeId","data-v-75f022a2"]]);var y=h,_=t(7906),F=t(5306),x=t(5234),w=t(1387),C=t(5130),I=t(3851);const R={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},V=["onClick"],L={style:{"text-align":"left"}},S={style:{"text-align":"left"}},K={class:"dialog-footer"},z=1;var A=(0,l.pM)({__name:"AddFriendDialog",props:{visible:Boolean},emits:["update:visible"],setup(e,{emit:a}){const t=(0,r.KR)(""),s=(0,r.KR)(1),i=a,u=(0,r.KR)(!1),d=(0,r.KR)(!1),c=(0,r.KR)([]),v=(0,r.KR)([]),p=(0,l.WQ)("ImSdk"),m=(0,r.KR)(5),g=(0,r.KR)(1),b=(0,r.KR)(0),k=(0,r.KR)(!1),f=(0,r.Kh)({}),h=(0,r.KR)(),y=(e,a,t,l)=>{u.value=!0,p.queryImUserPage(e,a,t,l).then((e=>{const{records:a,current:t,total:l}=e.data;a.forEach((e=>{e.picture="https://randomuser.me/api/portraits/women/72.jpg"})),c.value=a,v.value=a,u.value=!1,b.value=l,g.value=t}))},_=()=>{c.value=[],v.value=[],g.value=1,m.value=5},F=()=>{_(),y(g.value,m.value,t.value,"")},x=()=>{(0,l.dY)((()=>{y(g.value,m.value,t.value,"")}))},w=()=>{d.value=!0,v.value=c.value.concat([...new Array(z)].map((()=>({loading:!0,nickName:"",picture:""})))),g.value+=1,p.queryImUserPage(g.value,m.value,t.value,"").then((e=>{if(200===e.code){const{records:a,total:t}=e.data;a.forEach((e=>{e.picture="https://randomuser.me/api/portraits/women/72.jpg"}));const l=c.value.concat(a);d.value=!1,c.value=l,v.value=l,b.value=t}else(0,I.df)({type:"warning",message:e.msg})}))},A=()=>{i("update:visible",!1),_(),t.value=""},j=e=>{f.userId=e.userId,k.value=!0},W=async e=>{e&&(console.log("submit!",f),p.addFriend(f.userId,f.remark,"1",f.addWording,"").then((e=>{console.log("发送结果",e);const{msg:a,code:t}=e;200===t?((0,I.df)({type:"success",message:a}),A()):(0,I.df)({type:"warning",message:a}),k.value=!1})))},E=e=>{k.value=!1},O=e=>`https://robohash.org/${e}?set=set4&size=200x200`;return(a,i)=>{const c=(0,l.g2)("el-option"),p=(0,l.g2)("el-select"),m=(0,l.g2)("el-button"),g=(0,l.g2)("el-input"),y=(0,l.g2)("a-button"),_=(0,l.g2)("a-avatar"),I=(0,l.g2)("a-list-item-meta"),z=(0,l.g2)("a-skeleton"),U=(0,l.g2)("a-list-item"),P=(0,l.g2)("a-list"),q=(0,l.g2)("el-dialog"),M=(0,l.g2)("el-form-item"),X=(0,l.g2)("el-form");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(q,{"model-value":e.visible,title:"添加好友",width:"700px",onClose:A,onOpen:x},{default:(0,l.k6)((()=>[(0,l.bF)(g,{modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=e=>t.value=e),style:{"max-width":"700px"},placeholder:"输入查询条件",class:"input-with-select","destroy-on-close":"",onKeyup:(0,C.jR)(F,["enter"])},{prepend:(0,l.k6)((()=>[(0,l.bF)(p,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},placeholder:"Select",style:{width:"115px"}},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"昵称",value:1}),(0,l.bF)(c,{label:"Tel",value:2})])),_:1},8,["modelValue"])])),append:(0,l.k6)((()=>[(0,l.bF)(m,{icon:(0,r.R1)(o.vji),onClick:F},null,8,["icon"])])),_:1},8,["modelValue"]),(0,l.Lk)("div",null,[(0,l.bF)(P,{class:"demo-loadmore-list",loading:u.value,"item-layout":"horizontal","data-source":v.value},{loadMore:(0,l.k6)((()=>[!u.value&&!d.value&&v.value.length<b.value?((0,l.uX)(),(0,l.CE)("div",R,[(0,l.bF)(y,{onClick:w},{default:(0,l.k6)((()=>[(0,l.eW)("加载更多")])),_:1})])):(0,l.Q3)("",!0)])),renderItem:(0,l.k6)((({item:e})=>[(0,l.bF)(U,null,{actions:(0,l.k6)((()=>[(0,l.Lk)("a",{key:"list-loadmore-more",onClick:a=>j(e)},"添加好友",8,V)])),default:(0,l.k6)((()=>[(0,l.bF)(z,{avatar:"",title:!1,loading:!!e.loading,active:""},{default:(0,l.k6)((()=>[(0,l.bF)(I,null,{title:(0,l.k6)((()=>[(0,l.Lk)("div",L,(0,n.v_)(e.nickName),1)])),avatar:(0,l.k6)((()=>[(0,l.bF)(_,{src:O(e.nickName)},null,8,["src"])])),description:(0,l.k6)((()=>[(0,l.Lk)("div",S,(0,n.v_)(e.selfSignature),1)])),_:2},1024)])),_:2},1032,["loading"])])),_:2},1024)])),_:1},8,["loading","data-source"])])])),_:1},8,["model-value"]),(0,l.bF)(q,{modelValue:k.value,"onUpdate:modelValue":i[7]||(i[7]=e=>k.value=e),title:"添加好友信息",width:"700px",center:"",ref_key:"ruleFormRef",ref:h},{footer:(0,l.k6)((()=>[(0,l.Lk)("div",K,[(0,l.bF)(m,{onClick:i[5]||(i[5]=e=>E(h.value))},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1}),(0,l.bF)(m,{type:"primary",onClick:i[6]||(i[6]=e=>W(h.value))},{default:(0,l.k6)((()=>[(0,l.eW)(" 确定 ")])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(X,{model:f,"label-width":"auto",style:{"max-width":"700px"}},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(M,{label:"userId",prop:"userId",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(g,{modelValue:f.userId,"onUpdate:modelValue":i[2]||(i[2]=e=>f.userId=e)},null,8,["modelValue"])])),_:1},512),[[C.aG,!1]]),(0,l.bF)(M,{label:"备注",prop:"remark",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(g,{modelValue:f.remark,"onUpdate:modelValue":i[3]||(i[3]=e=>f.remark=e),placeholder:"备注"},null,8,["modelValue"])])),_:1}),(0,l.bF)(M,{label:"验证",prop:"addWording",required:""},{default:(0,l.k6)((()=>[(0,l.bF)(g,{modelValue:f.addWording,"onUpdate:modelValue":i[4]||(i[4]=e=>f.addWording=e),type:"textarea",placeholder:"请输入和 Ta 打招呼的验证信息"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}}});const j=(0,f.A)(A,[["__scopeId","data-v-a535c86e"]]);var W=j;const E=e=>((0,l.Qi)("data-v-2ff6bcd0"),e=e(),(0,l.jt)(),e),O={style:{display:"flex"}},U={class:"sidebar"},P={class:"styled-contact-list"},q={class:"contact-header"},M={style:{height:"36px",width:"36px","background-color":"rgba(24, 28, 47, 0.2)","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"}},X={class:"contact-body"},N={style:{display:"flex","align-items":"center"}},$={style:{height:"42px",width:"42px","background-color":"rgb(211 142 22 / 20%)","border-radius":"8px",display:"flex","align-items":"center","justify-content":"center"}},T=E((()=>(0,l.Lk)("div",{style:{"margin-left":"1rem","font-size":"1.2rem","padding-right":"5px"}},"新的朋友 ",-1))),D={style:{flex:"1",height:"100vh"}};var Q=(0,l.pM)({__name:"ContactPage",setup(e){const a=(0,w.rd)(),t=(0,_.J)(),{friendShipList:s,currentContactCarId:i}=(0,x.bP)(t),u=(0,r.KR)(""),d=(0,r.KR)(!1),c=()=>{console.log("addFriendHandler"),d.value=!0},v=(0,F.u)(),{unreadCount:m}=(0,x.bP)(v),g=(0,l.EW)((()=>0===m.value)),b=()=>{i.value="new_fiend",a.replace("/main/contacts/friendRequest")},k=e=>{i.value=e.toId,a.replace({path:"/main/contacts/friendDetail",query:{userId:e.toId}})};return(e,a)=>{const t=(0,l.g2)("el-button"),v=(0,l.g2)("el-input"),f=(0,l.g2)("el-icon"),h=(0,l.g2)("el-badge"),_=(0,l.g2)("el-card"),F=(0,l.g2)("el-scrollbar"),x=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",O,[(0,l.Lk)("div",U,[(0,l.Lk)("div",P,[(0,l.Lk)("div",q,[(0,l.bF)(v,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),style:{width:"87%",height:"40px","border-radius":"24px","background-color":"rgba(241, 237, 237, 0.3)"},placeholder:"搜索",class:"input-with-select"},{prepend:(0,l.k6)((()=>[(0,l.bF)(t,{icon:(0,r.R1)(o.vji)},null,8,["icon"])])),_:1},8,["modelValue"]),(0,l.Lk)("div",M,[(0,l.bF)(f,{size:"26",onClick:c},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(p))])),_:1})])]),(0,l.Lk)("div",X,[(0,l.bF)(F,{height:"100%",style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(_,{style:{width:"99%",margin:"3px  0"},shadow:"hover",onClick:b,class:(0,n.C4)({"car-container-click":"new_fiend"===(0,r.R1)(i)})},{default:(0,l.k6)((()=>[(0,l.Lk)("div",N,[(0,l.Lk)("div",$,[(0,l.bF)(f,{size:"26"},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(p))])),_:1})]),(0,l.bF)(h,{value:(0,r.R1)(m),max:99,class:"el-badge-style",hidden:g.value},{default:(0,l.k6)((()=>[T])),_:1},8,["value","hidden"])])])),_:1},8,["class"]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,r.R1)(s),((e,a)=>((0,l.uX)(),(0,l.Wv)(y,{class:(0,n.C4)({"car-container-click":e.toId===(0,r.R1)(i)}),key:`${e.toId}_${a}`,contact:e,onClick:a=>k(e)},null,8,["class","contact","onClick"])))),128))])),_:1})])])]),(0,l.Lk)("div",D,[(0,l.bF)(x)])]),(0,l.bF)(W,{visible:d.value,"onUpdate:visible":a[1]||(a[1]=e=>d.value=e)},null,8,["visible"])],64)}}});const B=(0,f.A)(Q,[["__scopeId","data-v-2ff6bcd0"]]);var H=B}}]);
//# sourceMappingURL=299.0316e3ec.js.map